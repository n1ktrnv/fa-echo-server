# Лабораторная работа "Эхо-сервер" по Практикуму по программированию

### Цель работы

Познакомиться с приемами работы с сетевыми сокетами в языке программирования Python.

### Задания для самостоятельного выполнения

1. Модифицируйте код сервера таким образом, чтобы при разрыве соединения клиентом он продолжал слушать данный порт и, таким образом, был доступен для повторного подключения.

По логам видно, что пользователь подключился несколько раз.

Сервер:
![screenshot](image/1.png)

2. Модифицируйте код клиента и сервера таким образом, чтобы номер порта и имя хоста (для клиента) они спрашивали у пользователя. Реализовать безопасный ввод данных и значения по умолчанию.

Сервер (неверный порт):
![screenshot](image/2.5.png)

Сервер (верный порт):
![screenshot](image/2.1.png)

Клиент:
![screenshot](image/2.2.png)

Сервер (по умолчанию):
![screenshot](image/2.4.png)

Клиент (по умолчанию):
![screenshot](image/2.3.png)

3. Модифицировать код сервера таким образом, чтобы все служебные сообщения выводились не в консоль, а в специальный лог-файл.

![screenshot](image/3.png)

4. Модифицируйте код сервера таким образом, чтобы он автоматически изменял номер порта, если он уже занят. Сервер должен выводить в консоль номер порта, который он слушает.

![screenshot](image/4.1.png)

![screenshot](image/4.2.png)

5. Реализовать сервер идентификации. Сервер должен принимать соединения от клиента и проверять, известен ли ему уже этот клиент (по IP-адресу). Если известен, то поприветствовать его по имени. Если неизвестен, то запросить у пользователя имя и записать его в файл. Файл хранить в произвольном формате.
6. Реализовать сервер аутентификации. Похоже на предыдущее задание, но вместе с именем пользователя сервер отслеживает и проверяет пароли. Дополнительные баллы за безопасное хранение паролей. Дополнительные баллы за поддержание сессии на основе токена наподобие cookies

Сразу реализован весь функционал, требуемый п.п. 5-6.

![screenshot](image/5.1.png)

![screenshot](image/5.2.png)

![screenshot](image/5.3.png)

![screenshot](image/5.4.png)

Внесем изменения в токен (смоделируем ситуацию, в который мы потеряли токен, данный сервером для запоминания).

![screenshot](image/5.5.png)

![screenshot](image/5.6.png)

![screenshot](image/5.7.png)

![screenshot](image/5.8.png)

7. Напишите вспомогательные функции, которые реализуют отправку и принятие текстовых сообщений в сокет. Функция отправки должна дополнять сообщение заголовком фиксированной длины, в котором содержится информация о длине сообщения. Функция принятия должна читать сообщение с учетом заголовка. В дополнении реализуйте преобразование строки в байтовый массив и обратно в этих же функциях. Дополнително оценивается, если эти функции будут реализованы как унаследованное расширение класса socket библиотеки socket.

8. Дополните код клиента и сервера таким образом, чтобы они могли посылать друг другу множественные сообщения один в ответ на другое.

Метод input запрашивает данные, говоря, что ему нужно и ждет ответ клиента. Таким образом, можно реализовать множественное общение с клиентом.
